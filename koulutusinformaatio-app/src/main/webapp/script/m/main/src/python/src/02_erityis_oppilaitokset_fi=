from operator import itemgetter
from data import s, get, out, dotted_getter, transformlostoproviders

url = "/lo/search?text=*&start=0&rows=25&lang=fi&searchType=LO&facetFilters=educationType_ffm:et01.03.02&facetFilters=teachingLangCode_ffm:FI"

results = get(url)
if "results" in results:
	los = sorted([get(s("/lo/special/{x[id]}")) for x in results["results"]], key=dotted_getter("name"))
	retval = transformlostoproviders(los)
	retval = sorted(retval, key=dotted_getter("name"))
else:
	retval = []
