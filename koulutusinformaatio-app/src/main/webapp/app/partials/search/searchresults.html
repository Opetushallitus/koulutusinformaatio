<section class="content-container grid16-16 margin-bottom-2">
    <div data-ki-breadcrumb="breadcrumb-search-results" id="breadcrumb"></div>
    <div class="grid16-16 align-center margin-bottom-4">
        <h1 class="margin-bottom-0 margin-top-0">
            <span data-ki-i18n="search-result-title"></span> &rdquo;{{queryString}}&rdquo; ({{loResult.totalCount}} <span data-ki-i18n="search-result-count-unit"></span>)
        </h1>
        <span data-ki-i18n="search-result-title-description"></span>
    </div>
    <div id="facetSelections" class="grid16-16" data-ng-show="areThereSelections()" data-ng-controller="SearchFilterCtrl">
    	<ul>
    		<li class="bold"><span data-ki-i18n="valitut-rajaukset" data-show-colon="true"></span></li>
    		<li data-ng-show="ongoing" class="facet-selection">
                <a href="javascript:void(0)" data-ng-click="removeOngoing()">
                    <span data-ki-i18n="haun-tila" data-show-colon="true"></span> <span data-ki-i18n="filter-search-as-ongoing"></span>
                    <span class="remove" data-ki-i18n="facet-remove"></span>
                </a>
    		</li>
            <li data-ng-show="upcoming" class="facet-selection">
                <a href="javascript:void(0)" data-ng-click="removeUpcoming()">
                    <span data-ki-i18n="haun-tila"></span>: <span data-ki-i18n="filter-search-as-upcoming"></span>
                    <span class="remove" data-ki-i18n="facet-remove"></span>
                </a>
    		</li>
            <li data-ng-repeat="fs in facetSelections" class="facet-selection">
                <a href="javascript:void(0)" data-ng-click="removeSelection(fs)">
                    <span data-ki-i18n="{{fs.facetField}}" data-show-colon="true"></span> <span data-ki-i18n="{{fs.valueName}}"></span>
                    <span class="remove" data-ki-i18n="facet-remove"></span>
                </a>
            </li>
            <li data-ng-repeat="loc in locations" class="facet-selection">
                <a href="javascript:void(0)" data-ng-click="removeLocation(loc)">
                    <span data-ki-i18n="location-rajaus" data-show-colon="true"></span> {{loc.name}}
                    <span class="remove" data-ki-i18n="facet-remove"></span>
                </a>
    		</li>
    	</ul>
    </div>
    
    <div class="grid16-5" data-ng-controller="SearchFilterCtrl" data-ng-show="loResult.totalCount > 0">
        <div class="filter">
            <h2 class="margin-top-0 align-center"><span data-ki-i18n="selaile-koulutuksia"></span></h2>
            <div>
                <ul class="nobullet collapse-content-container">
                    <li data-ng-show="loResult.ongoingFacet">
                    	<span data-ng-show="!ongoing && loResult.ongoingFacet.count > 0" class="facet-item">
                    		<a href data-ng-click="setOngoing()"><span data-ki-i18n="filter-search-as-ongoing"></span></a> ({{loResult.ongoingFacet.count}})
                    	</span>
                    	<span data-ng-show="ongoing && loResult.ongoingFacet.count > 0" class="facet-item selected">
                 			<span data-ki-i18n="filter-search-as-ongoing"></span> ({{loResult.ongoingFacet.count}})
                 		</span>
                    </li>
                    <li data-ng-show="loResult.upcomingFacet">
                    	<span data-ng-show="!upcoming && loResult.upcomingFacet.count > 0" class="facet-item">
                    		<a href data-ng-click="setUpcoming()"><span data-ki-i18n="filter-search-as-upcoming"></span></a> ({{loResult.upcomingFacet.count}})
                    	</span>
                    	<span data-ng-show="upcoming && loResult.upcomingFacet.count > 0" class="facet-item selected">
                    		<span data-ki-i18n="filter-search-as-upcoming"></span> ({{loResult.upcomingFacet.count}})
                    	</span>
                    </li>
                </ul>
            </div>
        </div>

        <div class="filter">
            <h4 data-ng-click="toggleCollapsed(0)" class="collapser" data-ng-class="{open: !collapsed[0], close: collapsed[0]}">
                <span class="icon"></span>
                <span data-ki-i18n="haettava-koulutus"></span>
            </h4>
            <div collapse="collapsed[0]" class="collapse">
                <ul class="nobullet collapse-content-container">
                    <li data-ng-show="loResult != undefined && loResult.edTypeFacet.et1">
                    	<span data-ng-show="!isEdTypeSelected(loResult.edTypeFacet.et1)" class="facet-item">
        					<a href data-ng-click="selectFacetFilter(loResult.edTypeFacet.et1.valueId, loResult.edTypeFacet.et1.facetField)"><span data-ki-i18n="et1"></span></a> ({{loResult.edTypeFacet.et1.count}})
        				</span>
        				<span data-ng-show="isEdTypeSelected(loResult.edTypeFacet.et1)" class="facet-item selected">
                            <span><span data-ki-i18n="et1"></span> ({{loResult.edTypeFacet.et1.count}})</span>
                        </span>
                    </li>
                    <li data-ng-show="loResult != undefined && loResult.edTypeFacet.et2">
                    	<span data-ng-show="!isEdTypeSelected(loResult.edTypeFacet.et2)" class="facet-item">
        					<a href data-ng-click="selectFacetFilter(loResult.edTypeFacet.et2.valueId, loResult.edTypeFacet.et2.facetField)"><span data-ki-i18n="et2"></span></a> ({{loResult.edTypeFacet.et2.count}})
        				</span>
        				<span data-ng-show="isEdTypeSelected(loResult.edTypeFacet.et2)" class="facet-item selected">
                            <span><span data-ki-i18n="et2"></span> ({{loResult.edTypeFacet.et2.count}})</span>
                        </span>
                    </li>
                    <li data-ng-show="loResult != undefined && loResult.edTypeFacet.et3">
                    	<span data-ng-show="!isEdTypeSelected(loResult.edTypeFacet.et3)" class="facet-item">
        					<a href data-ng-click="selectFacetFilter(loResult.edTypeFacet.et3.valueId, loResult.edTypeFacet.et3.facetField)"><span data-ki-i18n="et3"></span></a> ({{loResult.edTypeFacet.et3.count}})
        				</span>
        				<span data-ng-show="isEdTypeSelected(loResult.edTypeFacet.et3)" class="facet-item selected">
                            <span><span data-ki-i18n="et3"></span> ({{loResult.edTypeFacet.et3.count}})</span>
                        </span>
                    </li>
                    <li data-ng-show="loResult != undefined && loResult.edTypeFacet.et4">
                    	<span data-ng-show="!isEdTypeSelected(loResult.edTypeFacet.et4)" class="facet-item">
        					<a href data-ng-click="selectFacetFilter(loResult.edTypeFacet.et4.valueId, loResult.edTypeFacet.et4.facetField)"><span data-ki-i18n="et4"></span></a> ({{loResult.edTypeFacet.et4.count}})
        				</span>
        				<span data-ng-show="isEdTypeSelected(loResult.edTypeFacet.et4)" class="facet-item selected">
                            <span><span data-ki-i18n="et4"></span> ({{loResult.edTypeFacet.et4.count}})</span>
                        </span>
                    </li>
                    <li data-ng-show="loResult != undefined && loResult.edTypeFacet.et5">
                    	<span data-ng-show="!isEdTypeSelected(loResult.edTypeFacet.et5)" class="facet-item">
        					<a href data-ng-click="selectFacetFilter(loResult.edTypeFacet.et5.valueId, loResult.edTypeFacet.et5.facetField)"><span data-ki-i18n="et5"></span></a> ({{loResult.edTypeFacet.et5.count}})
        				</span>
        				<span data-ng-show="isEdTypeSelected(loResult.edTypeFacet.et5)" class="facet-item selected">
                            <span><span data-ki-i18n="et5"></span> ({{loResult.edTypeFacet.et5.count}})</span>
                        </span>
                    </li>
                    
                </ul>
            </div>
        </div>
    	
        <div class="filter">
    		<h4 data-ng-click="toggleCollapsed(1)" class="collapser" data-ng-class="{open: !collapsed[1], close: collapsed[1]}">
                <span class="icon"></span>
                <span data-ki-i18n="filter-search-location-title"></span>
            </h4>
            <div collapse="collapsed[1]" class="collapse">
                <div class="collapse-content-container">
                	<div data-ki-location-filter></div>
                    <a href="javascript:void(0)" 
                        data-ki-i18n="valitse-alue-link" 
                        data-popover-placement="right" 
                        data-popover-title="{{valitseAlueTitle}}" 
                        data-popover-template="templates/selectArea.html" 
                        data-ng-click="openAreaDialog()"
                        class="float-right">
                    </a>
                    <div class="clear"></div>
                </div>
            </div>
        </div>
        
        <div class="filter">
    		<h4 data-ng-click="toggleCollapsed(2)" class="collapser" data-ng-class="{open: !collapsed[2], close: collapsed[2]}">
                <span class="icon"></span>
                <span data-ki-i18n="facet-opetuskieli"></span>      
            </h4>
    		<div collapse="collapsed[2]" class="collapse">
                <ul class="nobullet collapse-content-container">
        			<li data-ng-repeat="fv in loResult.teachingLangFacet.facetValues">
        				<span data-ng-show="!isSelected(fv)" class="facet-item">
        					<a href data-ng-click="selectFacetFilter(fv.valueId, fv.facetField)">{{fv.valueName}}</a> ({{fv.count}})
        				</span>
        				<span data-ng-show="isSelected(fv)" class="facet-item selected">
                            <span>{{fv.valueName}} ({{fv.count}})</span>
                        </span>
        			</li>
        		</ul>
            </div>
    	</div>
    </div>

    <div class="grid16-11">
        
        <div data-ng-switch="loResult.totalCount">
            <div data-ng-switch-when="0">
                <div class="notification info">
                    <h3 data-ki-i18n="no-search-results"></h3>
                    <span data-ki-i18n="no-search-results-info"></span>
                </div>
            </div>
            <div data-ng-switch-default>
                <div class="sort-area" data-ng-controller="SortCtrl">
                    
                    <div class="sort-item left">
                        <label data-ki-i18n="sort-results-label" data-show-colon="true"></label>
                        <span>{{pageMin}} - {{pageMax}} / {{totalItems}}</span>
                    </div>

                    <div class="sort-item">
                        <label for="itemsPerPage" data-ki-i18n="sort-criteria-sort-label"></label>
                        <select 
                            data-ng-model="sortCriteria"
                            data-ng-options="key as value for (key, value) in sortCriterias"
                            data-ng-change="updateSortCriteria()"
                            data-ng-style="{'width': 'auto'}">
                        </select>
                    </div>
                    <div class="sort-item">
                        <label for="itemsPerPage" data-ki-i18n="sort-criteria-items-per-page-label" data-show-colon="true"></label>
                        <select 
                            data-ng-model="itemsPerPage"
                            data-ng-options="value for value in pageSizes"
                            data-ng-change="updateItemsPerPage()"
                            data-ng-style="{'width': 'auto'}">
                        </select>
                    </div>
                    <div class="clear"></div>
                </div>

                <div data-ng-show="showPagination">
                    <div data-pager
                        data-on-select-page="changePage(page)" 
                        data-num-pages="maxPages"
                        data-total-items="totalItems"
                        data-items-per-page="itemsPerPage"
                        data-rotate="false"
                        data-page="currentPage" 
                        data-next-text="{{paginationNext}}"
                        data-previous-text="{{paginationPrevious}}">
                    </div>
                </div>

                <ul id="search-results">
                    <li data-ng-repeat="lo in loResult.results" data-search-result>
                    </li>
                </ul>

                <div data-ng-show="showPagination">
                    <div data-pager
                        data-on-select-page="changePage(page)" 
                        data-num-pages="maxPages"
                        data-total-items="totalItems"
                        data-items-per-page="itemsPerPage"
                        data-rotate="false"
                        data-page="currentPage" 
                        data-next-text="{{paginationNext}}"
                        data-previous-text="{{paginationPrevious}}">
                    </div>
                    <span class="pager-results">{{pageMin}} - {{pageMax}} / {{totalItems}}</span>
                </div>
            </div>
        </div>
    </div>

<div class="clear"></div>
</section>