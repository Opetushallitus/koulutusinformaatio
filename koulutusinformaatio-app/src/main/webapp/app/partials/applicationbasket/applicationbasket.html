<section class="content-container margin-bottom-2">
    <div class="grid16-16 application-basket-container">
        <div data-ki-breadcrumb="title-application-basket-content" id="breadcrumb" class="float-left"></div>
        <a class="float-right" href="#!/haku/{{queryString}}" data-ki-i18n="application-basket-back"></a>
        <div class="clear"></clear>
        <h1 class="float-left margin-top-0">{{title}} ({{itemCount}})</h1>
        <div class="clear"></div>
        <p data-ki-i18n="application-basket-description"></p>
        <div data-ng-switch="basketIsEmpty">
            <div data-ng-switch-when="true">
                <p data-ki-i18n="application-basket-no-content"></p>
            </div>
            <div data-ng-switch="false">
                <div class="application-basket margin-bottom-6" data-ng-repeat="as in applicationItems">
                    <table class="margin-bottom-2">
                        <colgroup>
                            <col style="width: 25%;"></col>
                            <col style="width: 30%;"></col>
                            <col style="width: 21%;"></col>
                            <col style="width: 21%;"></col>
                            <col></col>
                        </colgroup>
                        <thead>
                            <tr>
                                <th colspan="5"><span class="margin-0 block h2">{{as.applicationSystemName}} <span data-ki-timestamp="{{as.applicationDates.startDate}}"></span> - <span data-ki-timestamp="{{as.applicationDates.endDate}}"></span></span></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="first">
                                <th></th>
                                <th></th>
                                <th>Liitteet ja kokeet</th>
                                <th>Liitteen määräaika tai kokeen ajankohta</th>
                                <th class="last"></th>
                            </tr>
                            <tr data-ng-repeat="item in as.applicationOptions" data-ng-class="{last: $last}">
                                <td>
                                    <ul class="nobullet">
                                        <li>
                                            <h4 class="margin-top-0 margin-bottom-0">{{item.providerName}}, <span class="capitalized">{{item.providerLocation}}</span></h4>
                                            <a data-ng-hide="item.isLukio" class="block" href="#!/tutkinto/{{item.parent.id}}#{{item.prerequisite.value}}">{{item.parent.name}}</a>
                                        </li>
                                        <li class="margin-top-2"><span>{{item.qualification}}</span></li>
                                        <li><span>{{item.prerequisite.description}}</span></li>
                                    </ul>
                                </td>
                                <td>
                                    <div data-ng-switch="item.isLukio">
                                        <div data-ng-switch-when="false">
                                            <h4 class="margin-top-0 margin-bottom-1">{{item.name}}</h4>
                                            <ul class="disc">
                                                <li data-ng-repeat="child in item.children"><a href="#!/koulutusohjelma/{{child.losId}}#{{item.prerequisite.value}}">{{child.name}}</a></li>
                                            </ul>
                                        </div>
                                        <div data-ng-switch-when="true">
                                            <a href="#!/lukio/{{item.losId}}" class="margin-top-0 margin-bottom-1 block">{{item.providerName}}, {{item.name}}</a>
                                        </div>
                                    </div>
                                </td>
                                <td class="align-left table-container" colspan="2">
                                    <table class="sub">
                                        <colgroup>
                                            <col style="width: 50%;"></col>
                                            <col style="width: 50%;"></col>
                                        </colgroup>
                                        <tr data-ng-repeat="attachment in item.attachments | orderBy:'dueDate'">
                                            <td class="align-right">{{attachment.type}}</td>
                                            <td class="bold"><span data-ki-timestamp="{{attachment.dueDate}}"></span></td>
                                        </tr>
                                        <tr data-ng-repeat="exam in item.exams">
                                            <td class="align-right">{{exam.type}}</td>
                                            <td class="bold">
                                                <span data-ng-repeat="examEvent in exam.examEvents | orderBy:'start'">
                                                    <span data-ki-time-interval data-exam-event="examEvent"></span><br/>
                                                </span>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td class="basket-remove last">
                                    <a href="javascript:void(0)" class="remove" data-ng-click="removeItem(item.id)">
                                        <span>Poista</span>
                                    </a>
                                </td>
                            </tr>
                        </tbody>
                        <tfoot>
                        </tfoot>
                    </table>
                    <span class="float-right margin-bottom-2">{{notificationText}}</span>
                    <form action="{{hakuAppUrl}}lomake/{{as.applicationSystemId}}" id="application-form-{{as.applicationSystemId}}" method="post" target="hakulomake">
                        <span data-ng-repeat="item in as.applicationOptions">
                            <input type="hidden" name="preference{{$index + 1}}-Opetuspiste" value="{{item.providerName}}"/>
                            <input type="hidden" name="preference{{$index + 1}}-Opetuspiste-id" value="{{item.providerId}}"/>
                            <input type="hidden" name="preference{{$index + 1}}-Koulutus-id-athlete" value="{{item.athleteEducation}}"/>
                            <input type="hidden" name="preference{{$index + 1}}-Koulutus" value="{{item.name}}"/>
                            <input type="hidden" name="preference{{$index + 1}}-Koulutus-id" value="{{item.id}}"/>
                            <input type="hidden" name="preference{{$index + 1}}-Koulutus-educationDegree" value="{{item.educationDegree}}"/>
                            <input type="hidden" name="preference{{$index + 1}}-Koulutus-id-sora" value="{{item.sora}}" />
                            <input type="hidden" name="preference{{$index + 1}}-Koulutus-id-lang" value="{{item.teachLang}}" />
                            <input type="hidden" name="preference{{$index + 1}}-Koulutus-id-aoIdentifier" value="{{item.aoIdentifier}}" />
                            <input type="hidden" name="preference{{$index + 1}}-Koulutus-id-kaksoistutkinto" value="{{item.kaksoistutkinto}}" />
                            <input type="hidden" name="preference{{$index + 1}}-Koulutus-id-vocational" value="{{item.vocational}}" />
                            <input type="hidden" name="preference{{$index + 1}}-Koulutus-id-educationcode" value="{{item.educationCodeUri}}" />
                        </span>
                        <div class="action-area">
                            <div data-ng-show="applicationBasketIsOverflowing(as.applicationSystemId)" data-ki-i18n="application-basket-overflow-warning" class="notification warning clear float-right margin-bottom-2"></div>
                            <div data-ng-switch="applyButtonIsDisabled(as.applicationSystemId)" class="clear float-right">
                                <div data-ng-switch-when="true">
                                    <button class="primary" disabled="disabled" type="submit">
                                        <span>
                                            <span data-ki-i18n="application-basket-fill-form"></span>
                                        </span>
                                    </button>
                                </div>
                                <div data-ng-switch-when="false">
                                    <button class="primary" type="submit">
                                        <span>
                                            <span data-ki-i18n="application-basket-fill-form"></span>
                                        </span>
                                    </button>
                                </div>
                            </div>
                            <a href="javascript:void(0)" data-ng-click="removeApplicationSystemFromBasket(as.applicationSystemId)" data-ki-i18n="application-basket-empty" class="float-right block"></a>
                            <div class="margin-top-2 float-right clear" data-ki-render-application-system-active></div>
                        </div>
                    </form>
                    <div class="clear"></div>
                </div>
            </div>
        </div>
    </div>
<div class="clear"></div>
</section>